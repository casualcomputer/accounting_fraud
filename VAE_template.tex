% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
%
\documentclass[
]{article}
\usepackage{lmodern}
\usepackage{amssymb,amsmath}
\usepackage{ifxetex,ifluatex}
\ifnum 0\ifxetex 1\fi\ifluatex 1\fi=0 % if pdftex
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provide euro and other symbols
\else % if luatex or xetex
  \usepackage{unicode-math}
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
\fi
% Use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{microtype.sty}{% use microtype if available
  \usepackage[]{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\makeatletter
\@ifundefined{KOMAClassName}{% if non-KOMA class
  \IfFileExists{parskip.sty}{%
    \usepackage{parskip}
  }{% else
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
}{% if KOMA class
  \KOMAoptions{parskip=half}}
\makeatother
\usepackage{xcolor}
\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\IfFileExists{bookmark.sty}{\usepackage{bookmark}}{\usepackage{hyperref}}
\hypersetup{
  pdftitle={VAE\_template},
  pdfauthor={casualcomputer},
  hidelinks,
  pdfcreator={LaTeX via pandoc}}
\urlstyle{same} % disable monospaced font for URLs
\usepackage[margin=1in]{geometry}
\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{248,248,248}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.94,0.16,0.16}{#1}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.77,0.63,0.00}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\BuiltInTok}[1]{#1}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.64,0.00,0.00}{\textbf{#1}}}
\newcommand{\ExtensionTok}[1]{#1}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ImportTok}[1]{#1}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{#1}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{#1}}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\RegionMarkerTok}[1]{#1}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\usepackage{graphicx,grffile}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
% Set default figure placement to htbp
\makeatletter
\def\fps@figure{htbp}
\makeatother
\setlength{\emergencystretch}{3em} % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{-\maxdimen} % remove section numbering

\title{VAE\_template}
\author{casualcomputer}
\date{07/02/2021}

\begin{document}
\maketitle

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{knitr}\OperatorTok{::}\NormalTok{opts_chunk}\OperatorTok{$}\KeywordTok{set}\NormalTok{(}\DataTypeTok{echo =} \OtherTok{TRUE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\hypertarget{r-markdown}{%
\subsection{R Markdown}\label{r-markdown}}

\begin{Shaded}
\begin{Highlighting}[]
    \KeywordTok{library}\NormalTok{(dplyr)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## Attaching package: 'dplyr'
\end{verbatim}

\begin{verbatim}
## The following objects are masked from 'package:stats':
## 
##     filter, lag
\end{verbatim}

\begin{verbatim}
## The following objects are masked from 'package:base':
## 
##     intersect, setdiff, setequal, union
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
    \KeywordTok{library}\NormalTok{(stringr)}
    \KeywordTok{library}\NormalTok{(scales)}
\end{Highlighting}
\end{Shaded}

\hypertarget{load-data}{%
\subsection{Load data}\label{load-data}}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{# load accounting fraud data     }
\NormalTok{    dataset <-}\StringTok{ }\KeywordTok{read.csv}\NormalTok{(}\StringTok{"uscecchini28.csv"}\NormalTok{)}
\NormalTok{    data_dictionary <-}\StringTok{ }\KeywordTok{read.csv}\NormalTok{(}\StringTok{"get_Data_dict.csv"}\NormalTok{) }\CommentTok{#data dictionary: http://www.crsp.org/products/documentation/annual-data-industrial}
    \KeywordTok{str}\NormalTok{(dataset)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 'data.frame':    146045 obs. of  51 variables:
##  $ fyear         : int  1990 1990 1990 1990 1990 1990 1990 1990 1990 1990 ...
##  $ gvkey         : int  1009 1011 1017 1021 1028 1034 1036 1043 1045 1050 ...
##  $ sich          : int  3460 4841 3812 3861 7385 2834 3440 3555 4512 9995 ...
##  $ insbnk        : int  0 0 0 0 0 0 0 0 0 0 ...
##  $ understatement: int  0 0 0 0 0 0 0 0 0 0 ...
##  $ option        : int  0 0 0 0 0 0 0 0 0 0 ...
##  $ p_aaer        : int  NA NA NA NA NA NA NA NA NA NA ...
##  $ new_p_aaer    : int  NA NA NA NA NA NA NA NA NA NA ...
##  $ misstate      : int  0 0 0 0 0 0 0 0 0 0 ...
##  $ act           : num  10.05 1.25 55.04 24.68 17.32 ...
##  $ ap            : num  3.736 0.803 3.601 3.948 3.52 ...
##  $ at            : num  32.34 7.78 118.12 34.59 27.54 ...
##  $ ceq           : num  6.262 0.667 44.393 7.751 -12.142 ...
##  $ che           : num  0.002 0.171 3.132 0.411 1.017 ...
##  $ cogs          : num  30.63 1.12 107.34 31.21 32.66 ...
##  $ csho          : num  2.53 3.56 3.88 4.75 6.74 ...
##  $ dlc           : num  3.283 0.021 6.446 8.791 32.206 ...
##  $ dltis         : num  32.853 2.017 6.5 0.587 0 ...
##  $ dltt          : num  17.691 5.871 37.603 8.906 0.266 ...
##  $ dp            : num  1.97 0.7 6.27 1.32 2.71 ...
##  $ ib            : num  1.431 -1.869 1.722 0.422 -23.577 ...
##  $ invt          : num  2.355 0.663 4.292 15.463 8.971 ...
##  $ ivao          : num  0 0.132 12.989 0 0 ...
##  $ ivst          : num  0 0 2.91 0 0 ...
##  $ lct           : num  8.38 1.25 32.62 16.21 39.42 ...
##  $ lt            : num  26.07 7.12 73.73 25.55 39.68 ...
##  $ ni            : num  2.135 -1.869 2.574 0.422 -22.812 ...
##  $ ppegt         : num  31.77 7.33 78.33 11.14 5.78 ...
##  $ pstk          : num  0 0 0 1.29 0 ...
##  $ re            : num  5.42 -3.34 46.63 3.28 -25.95 ...
##  $ rect          : num  6.89 0.29 47.37 8.52 6.35 ...
##  $ sale          : num  40.52 3.63 144.26 48.29 33.54 ...
##  $ sstk          : num  0 0.006 0 0 0 0 0 0.082 0 0 ...
##  $ txp           : num  0 0 0 0.448 0 ...
##  $ txt           : num  0.769 0 0.986 0.365 0 ...
##  $ xint          : num  2.33 0.64 3.96 2.27 3.51 ...
##  $ prcc_f        : num  6 1.19 5.12 1.56 1.12 ...
##  $ dch_wc        : num  0.0696 -0.0656 0.0928 0.0141 -0.5405 ...
##  $ ch_rsst       : num  0.046 -0.2409 0.0201 0.0351 -0.5753 ...
##  $ dch_rec       : num  0.04193 -0.00625 0.00216 0.03558 -0.10215 ...
##  $ dch_inv       : num  0.03303 -0.02668 0.00275 0.00833 -0.22202 ...
##  $ soft_assets   : num  0.312 0.316 0.605 0.793 0.869 ...
##  $ ch_cs         : num  0.09508 0.18883 0.09755 -0.00573 -0.23154 ...
##  $ ch_cm         : num  0.0826 -0.2114 -0.1058 -0.2497 -1.6749 ...
##  $ ch_roa        : num  -0.0198 -0.1178 0.0912 0.0175 -0.4667 ...
##  $ issue         : int  1 1 1 1 0 1 1 1 1 1 ...
##  $ bm            : num  0.413 0.158 2.231 1.044 -1.603 ...
##  $ dpi           : num  0.874 0.745 1.015 1.026 0.598 ...
##  $ reoa          : num  0.1676 -0.429 0.3948 0.0948 -0.9424 ...
##  $ EBIT          : num  0.162 -0.1579 0.0637 0.0883 -0.7008 ...
##  $ ch_fcf        : num  -0.0421 0.1002 0.0663 -0.0174 0.1303 ...
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
    \KeywordTok{str}\NormalTok{(data_dictionary)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 'data.frame':    395 obs. of  5 variables:
##  $ New.CCM.Item.Name     : chr  "CHE" "RECT" "INVT" "ACT" ...
##  $ Keyset                : int  1 1 1 1 1 1 1 1 1 1 ...
##  $ Legacy.CST.Item.Number: int  1 2 3 4 5 6 7 8 9 10 ...
##  $ Legacy.CST.Item.Name  : chr  "iaitems" "iaitems" "iaitems" "iaitems" ...
##  $ Description           : chr  "Cash and Short-Term Investments" "Receivables/Total" "Inventories - Total" "Current Assets - Total" ...
\end{verbatim}

\hypertarget{rename-some-datasets-columns}{%
\subsection{Rename some dataset's
columns}\label{rename-some-datasets-columns}}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{#  change column names of "dataset", to reflect names of accounting variables}
\NormalTok{        colNames_dataset <-}\StringTok{ }\KeywordTok{toupper}\NormalTok{(}\KeywordTok{names}\NormalTok{(dataset))}
\NormalTok{        var_in_dict <-}\StringTok{    }\KeywordTok{data.frame}\NormalTok{(}\StringTok{"var"}\NormalTok{=}\KeywordTok{toupper}\NormalTok{(colNames_dataset)) }\OperatorTok{%>%}\StringTok{ }
\StringTok{                          }\KeywordTok{left_join}\NormalTok{(data_dictionary, }\DataTypeTok{by=}\KeywordTok{c}\NormalTok{(}\StringTok{"var"}\NormalTok{=}\StringTok{"New.CCM.Item.Name"}\NormalTok{)) }\OperatorTok{%>%}\StringTok{ }
\StringTok{                          }\KeywordTok{filter}\NormalTok{(}\OperatorTok{!}\KeywordTok{is.na}\NormalTok{(Description)) }\OperatorTok{%>%}\StringTok{ }
\StringTok{                          }\KeywordTok{select}\NormalTok{(var,Description)  }
        
\NormalTok{        var_position <-}\StringTok{ }\KeywordTok{c}\NormalTok{()}
        \ControlFlowTok{for}\NormalTok{ (i }\ControlFlowTok{in}\NormalTok{ var_in_dict}\OperatorTok{$}\NormalTok{var)\{}
\NormalTok{          var_position <-}\StringTok{ }\KeywordTok{c}\NormalTok{(var_position,}\KeywordTok{which}\NormalTok{(colNames_dataset}\OperatorTok{==}\NormalTok{i))}
\NormalTok{        \}}
\NormalTok{        var_in_dict}\OperatorTok{$}\NormalTok{position <-}\StringTok{ }\NormalTok{var_position}
    
        
        \ControlFlowTok{for}\NormalTok{ (i }\ControlFlowTok{in} \DecValTok{1}\OperatorTok{:}\KeywordTok{dim}\NormalTok{(var_in_dict)[}\DecValTok{1}\NormalTok{])\{}
          \KeywordTok{names}\NormalTok{(dataset)[var_in_dict[i,}\DecValTok{3}\NormalTok{]] <-}\StringTok{ }\NormalTok{var_in_dict[i,}\DecValTok{2}\NormalTok{]}
\NormalTok{        \}}
        \KeywordTok{names}\NormalTok{(dataset) <-}\StringTok{ }\KeywordTok{gsub}\NormalTok{(}\StringTok{"}\CharTok{\textbackslash{}\textbackslash{}\textbackslash{}\textbackslash{}}\StringTok{"}\NormalTok{,}\StringTok{""}\NormalTok{,}\KeywordTok{names}\NormalTok{(dataset))}
\KeywordTok{colnames}\NormalTok{(dataset)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1] "fyear"                                            
##  [2] "gvkey"                                            
##  [3] "Standard Industrial Classification - Historical"  
##  [4] "insbnk"                                           
##  [5] "understatement"                                   
##  [6] "option"                                           
##  [7] "p_aaer"                                           
##  [8] "new_p_aaer"                                       
##  [9] "misstate"                                         
## [10] "Current Assets - Total"                           
## [11] "Accounts Payable - Trade"                         
## [12] "Assets - Total"                                   
## [13] "Common/Ordinary Equity - Total"                   
## [14] "Cash and Short-Term Investments"                  
## [15] "Cost of Goods Sold"                               
## [16] "Common Shares Outstanding"                        
## [17] "Debt in Current Liabilities - Total"              
## [18] "Long-Term Debt/Issuance"                          
## [19] "Long-Term Debt - Total"                           
## [20] "Depreciation and Amortization"                    
## [21] "Income Before Extraordinary Items"                
## [22] "Inventories - Total"                              
## [23] "Investment and Advances/Other"                    
## [24] "Short-Term Investments - Total"                   
## [25] "Current Liabilities - Total"                      
## [26] "Liabilities - Total"                              
## [27] "Net Income (Loss)"                                
## [28] "\"Property, Plant and Equipment - Total (Gross)\""
## [29] "Preferred/Preference Stock (Capital) - Total"     
## [30] "Retained Earnings"                                
## [31] "Receivables/Total"                                
## [32] "Sales/Turnover (Net)"                             
## [33] "Sale of Common and Preferred Stock"               
## [34] "Income Taxes Payable"                             
## [35] "Income Taxes - Total"                             
## [36] "Interest and Related Expense - Total"             
## [37] "prcc_f"                                           
## [38] "dch_wc"                                           
## [39] "ch_rsst"                                          
## [40] "dch_rec"                                          
## [41] "dch_inv"                                          
## [42] "soft_assets"                                      
## [43] "ch_cs"                                            
## [44] "ch_cm"                                            
## [45] "ch_roa"                                           
## [46] "issue"                                            
## [47] "bm"                                               
## [48] "dpi"                                              
## [49] "reoa"                                             
## [50] "EBIT"                                             
## [51] "ch_fcf"
\end{verbatim}

\hypertarget{produce-some-basic-summaries}{%
\subsection{Produce some basic
summaries}\label{produce-some-basic-summaries}}

\begin{Shaded}
\begin{Highlighting}[]
    \CommentTok{#some numbers about frauds}
\NormalTok{        all_companies <-}\StringTok{ }\KeywordTok{unique}\NormalTok{(dataset}\OperatorTok{$}\NormalTok{gvkey)}
\NormalTok{        fraud_companies <-}\StringTok{ }\KeywordTok{unique}\NormalTok{((dataset[dataset}\OperatorTok{$}\NormalTok{understatement}\OperatorTok{==}\DecValTok{1}\NormalTok{,]}\OperatorTok{$}\NormalTok{gvkey))}
        \KeywordTok{cat}\NormalTok{(}\StringTok{"total number of companies: "}\NormalTok{, }\KeywordTok{length}\NormalTok{(all_companies))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## total number of companies:  18444
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
        \KeywordTok{cat}\NormalTok{(}\StringTok{"}\CharTok{\textbackslash{}n}\StringTok{number of fraud companies: "}\NormalTok{, }\KeywordTok{length}\NormalTok{(fraud_companies))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## number of fraud companies:  16
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
        \KeywordTok{cat}\NormalTok{(}\StringTok{"}\CharTok{\textbackslash{}n}\StringTok{fraud companies: "}\NormalTok{, fraud_companies)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## fraud companies:  5250 23288 8496 1278 13839 63859 3650 29001 30870 63951 10310 6497 141642 11982 62399 175982
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
        \KeywordTok{cat}\NormalTok{(}\StringTok{"}\CharTok{\textbackslash{}n\textbackslash{}n}\StringTok{"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
        \KeywordTok{cat}\NormalTok{(}\StringTok{"}\CharTok{\textbackslash{}n}\StringTok{Proportion of non-fraud vs. fraud annual statements"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## Proportion of non-fraud vs. fraud annual statements
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
        \KeywordTok{prop.table}\NormalTok{(}\KeywordTok{table}\NormalTok{(dataset}\OperatorTok{$}\NormalTok{understatement)) }\CommentTok{#fraud reporting (understatement=1) /all reporting}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
##            0            1 
## 0.9998219727 0.0001780273
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
        \KeywordTok{cat}\NormalTok{(}\StringTok{"}\CharTok{\textbackslash{}n\textbackslash{}n}\StringTok{"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{        fraud_perc <-}\StringTok{ }\KeywordTok{length}\NormalTok{(fraud_companies)}\OperatorTok{/}\KeywordTok{length}\NormalTok{(}\KeywordTok{unique}\NormalTok{(dataset}\OperatorTok{$}\NormalTok{gvkey)) }\CommentTok{#num. fraud companies/ all companies}
        \KeywordTok{cat}\NormalTok{(}\StringTok{"Proportion of fraud companies: "}\NormalTok{, fraud_perc)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Proportion of fraud companies:  0.0008674908
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
        \KeywordTok{cat}\NormalTok{(}\StringTok{"}\CharTok{\textbackslash{}n\textbackslash{}n}\StringTok{"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
        \KeywordTok{cat}\NormalTok{(}\StringTok{"}\CharTok{\textbackslash{}n}\StringTok{Total number of annual statements: "}\NormalTok{, }\KeywordTok{nrow}\NormalTok{(dataset))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## Total number of annual statements:  146045
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
        \KeywordTok{cat}\NormalTok{(}\StringTok{"}\CharTok{\textbackslash{}n}\StringTok{Total number of fraud statements: "}\NormalTok{, }\KeywordTok{nrow}\NormalTok{(dataset[dataset}\OperatorTok{$}\NormalTok{understatement}\OperatorTok{==}\DecValTok{1}\NormalTok{,]))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## Total number of fraud statements:  26
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
        \KeywordTok{cat}\NormalTok{(}\StringTok{"}\CharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
        \KeywordTok{cat}\NormalTok{(}\StringTok{"}\CharTok{\textbackslash{}n\textbackslash{}n}\StringTok{Contigency Table for statements labelled 'Issues'"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## 
## Contigency Table for statements labelled 'Issues'
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
        \KeywordTok{round}\NormalTok{(}\KeywordTok{prop.table}\NormalTok{(}\KeywordTok{table}\NormalTok{(dataset}\OperatorTok{$}\NormalTok{issue)),}\DecValTok{2}\NormalTok{) }\CommentTok{#what is this? what "issue" are we talking about?}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
##    0    1 
## 0.14 0.86
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
    \CommentTok{#check missing values}
\NormalTok{        missing_value_count <-}\StringTok{ }\KeywordTok{data.frame}\NormalTok{(}\DataTypeTok{missing_value_count=} \KeywordTok{apply}\NormalTok{(dataset, }\DecValTok{2}\NormalTok{, }\ControlFlowTok{function}\NormalTok{(x)\{}\KeywordTok{sum}\NormalTok{(}\KeywordTok{is.na}\NormalTok{(x))\})) }\OperatorTok{%>%}\StringTok{ }
\StringTok{                                }\KeywordTok{filter}\NormalTok{(missing_value_count}\OperatorTok{>=}\DecValTok{1}\NormalTok{)}
\NormalTok{        missing_value_count}\OperatorTok{$}\NormalTok{missing_var <-}\StringTok{ }\KeywordTok{row.names}\NormalTok{(missing_value_count)}
        \KeywordTok{row.names}\NormalTok{(missing_value_count) <-}\StringTok{ }\OtherTok{NULL}
\NormalTok{        missing_value_count <-}\StringTok{ }\NormalTok{missing_value_count[,}\KeywordTok{c}\NormalTok{(}\DecValTok{2}\NormalTok{,}\DecValTok{1}\NormalTok{)]}
\NormalTok{        missing_vale_df <-}\StringTok{ }\NormalTok{missing_value_count }\OperatorTok{%>%}\StringTok{ }
\StringTok{                              }\KeywordTok{arrange}\NormalTok{(missing_value_count) }\OperatorTok{%>%}
\StringTok{                              }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{missing_value_perc=} \KeywordTok{percent}\NormalTok{(missing_value_count}\OperatorTok{/}\KeywordTok{nrow}\NormalTok{(dataset)))}
\NormalTok{        missing_vale_df}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##                                        missing_var missing_value_count
## 1                                               bm                  18
## 2                                             reoa                 591
## 3                                             EBIT                 591
## 4                                      soft_assets                 592
## 5                                          dch_inv                4615
## 6                                          dch_rec                4743
## 7                                           dch_wc                4759
## 8                                          ch_rsst                4851
## 9                                           ch_fcf                5407
## 10                                             dpi                9228
## 11                                          ch_roa               12678
## 12 Standard Industrial Classification - Historical               13529
## 13                                           ch_cs               15918
## 14                                           ch_cm               17107
## 15                                          p_aaer              145081
## 16                                      new_p_aaer              145081
##    missing_value_perc
## 1            0.01232%
## 2            0.40467%
## 3            0.40467%
## 4            0.40535%
## 5            3.15998%
## 6            3.24763%
## 7            3.25858%
## 8            3.32158%
## 9            3.70228%
## 10           6.31860%
## 11           8.68089%
## 12           9.26358%
## 13          10.89938%
## 14          11.71351%
## 15          99.33993%
## 16          99.33993%
\end{verbatim}

\end{document}
